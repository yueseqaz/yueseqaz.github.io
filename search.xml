<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>数据库复习</title>
      <link href="/2024/12/23/dbreview/"/>
      <url>/2024/12/23/dbreview/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库语言（DDL、DML、DQL）"><a href="#数据库语言（DDL、DML、DQL）" class="headerlink" title="数据库语言（DDL、DML、DQL）"></a>数据库语言（DDL、DML、DQL）</h1><h2 id="DDL-Data-Definition-Language-数据定义语言"><a href="#DDL-Data-Definition-Language-数据定义语言" class="headerlink" title="DDL (Data Definition Language) 数据定义语言"></a>DDL (Data Definition Language) 数据定义语言</h2><h3 id="一、操作库"><a href="#一、操作库" class="headerlink" title="一、操作库"></a>一、操作库</h3><ul><li><strong>创建库</strong>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE db1;</span><br></pre></td></tr></table></figure>创建库（如果不存在则创建）<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> db1;</span><br></pre></td></tr></table></figure>查看所有数据库<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br></pre></td></tr></table></figure>查看某个数据库的定义信息<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE db1;</span><br></pre></td></tr></table></figure>修改数据库字符集<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE db1 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br></pre></td></tr></table></figure>删除数据库<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> DATABASE db1;</span><br></pre></td></tr></table></figure>二、操作表<br>创建表<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student (</span><br><span class="line">    id <span class="type">INT</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">32</span>),</span><br><span class="line">    age <span class="type">INT</span>,</span><br><span class="line">    score <span class="keyword">DOUBLE</span>(<span class="number">4</span>,<span class="number">1</span>),</span><br><span class="line">    birthday <span class="type">DATE</span>,</span><br><span class="line">    insert_time <span class="type">TIMESTAMP</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>查看表结构<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESC</span> 表名;</span><br></pre></td></tr></table></figure>查看创建表的 SQL 语句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure>修改表名<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 RENAME <span class="keyword">TO</span> 新的表名;</span><br></pre></td></tr></table></figure>添加一列<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> 列名 数据类型;</span><br></pre></td></tr></table></figure>删除列<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> 列名;</span><br></pre></td></tr></table></figure>删除表<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> 表名;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> 表名;</span><br><span class="line">DML (Data Manipulation <span class="keyword">Language</span>) 数据操作语言</span><br></pre></td></tr></table></figure>一、增加 (INSERT INTO)<br>写全所有列名<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 (列名<span class="number">1</span>, 列名<span class="number">2</span>, ..., 列名n) <span class="keyword">VALUES</span> (值<span class="number">1</span>, 值<span class="number">2</span>, ..., 值n);</span><br></pre></td></tr></table></figure>不写列名（所有列全部添加）<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span> (值<span class="number">1</span>, 值<span class="number">2</span>, ..., 值n);</span><br></pre></td></tr></table></figure>插入部分数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 (列名<span class="number">1</span>, 列名<span class="number">2</span>) <span class="keyword">VALUES</span> (值<span class="number">1</span>, 值<span class="number">2</span>);</span><br></pre></td></tr></table></figure>二、删除 (DELETE)<br>删除表中数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 列名 <span class="operator">=</span> 值;</span><br></pre></td></tr></table></figure>删除表中所有数据<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>高效清空表</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure><p>三、修改 (UPDATE)<br>不带条件的修改（会修改所有行）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 列名 <span class="operator">=</span> 值;</span><br></pre></td></tr></table></figure><p>带条件的修改</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 列名 <span class="operator">=</span> 值 <span class="keyword">WHERE</span> 列名 <span class="operator">=</span> 值;</span><br></pre></td></tr></table></figure><h2 id="DQL-Data-Query-Language-数据查询语言"><a href="#DQL-Data-Query-Language-数据查询语言" class="headerlink" title="DQL (Data Query Language) 数据查询语言"></a>DQL (Data Query Language) 数据查询语言</h2><p>一、基础关键字<br>范围查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">30</span>;</span><br></pre></td></tr></table></figure><p>多值查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> age <span class="keyword">IN</span> (<span class="number">22</span>, <span class="number">18</span>, <span class="number">25</span>);</span><br></pre></td></tr></table></figure><p>非空值查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> english <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure><p>模糊查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;马%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>二、排序查询 (ORDER BY)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> person <span class="keyword">ORDER</span> <span class="keyword">BY</span> math <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><p>三、聚合函数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(id), <span class="built_in">MAX</span>(score), <span class="built_in">MIN</span>(score), <span class="built_in">SUM</span>(score), <span class="built_in">AVG</span>(score) <span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure><p>四、分组查询 (GROUP BY)<br>示例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> sex, <span class="built_in">AVG</span>(math), <span class="built_in">COUNT</span>(id) <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> math <span class="operator">&gt;</span> <span class="number">70</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> sex <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(id) <span class="operator">&gt;</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>五、分页查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student LIMIT (页码<span class="number">-1</span>)<span class="operator">*</span>每页条数, 每页条数;</span><br></pre></td></tr></table></figure><p>六、内连接查询<br>隐式内连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> emp.name, emp.gender, dept.name </span><br><span class="line"><span class="keyword">FROM</span> emp, dept </span><br><span class="line"><span class="keyword">WHERE</span> emp.dept_id <span class="operator">=</span> dept.id;</span><br></pre></td></tr></table></figure><p>显式内连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> emp.name, dept.name </span><br><span class="line"><span class="keyword">FROM</span> emp <span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.dept_id <span class="operator">=</span> dept.id;</span><br></pre></td></tr></table></figure><p>七、外连接查询<br>左外连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> emp.<span class="operator">*</span>, dept.name </span><br><span class="line"><span class="keyword">FROM</span> emp <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.dept_id <span class="operator">=</span> dept.id;</span><br></pre></td></tr></table></figure><p>右外连接</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> emp.<span class="operator">*</span>, dept.name </span><br><span class="line"><span class="keyword">FROM</span> emp <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> dept <span class="keyword">ON</span> emp.dept_id <span class="operator">=</span> dept.id;</span><br></pre></td></tr></table></figure><p>八、子查询<br>单行单列</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> salary <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) <span class="keyword">FROM</span> emp);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>多行单列</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> dept_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> name <span class="keyword">IN</span> (<span class="string">&#x27;财务部&#x27;</span>, <span class="string">&#x27;市场部&#x27;</span>));</span><br></pre></td></tr></table></figure><p>多行多列</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> dept d, (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> join_date <span class="operator">&gt;</span> <span class="string">&#x27;2011-11-11&#x27;</span>) e </span><br><span class="line"><span class="keyword">WHERE</span> d.id <span class="operator">=</span> e.dept_id;</span><br></pre></td></tr></table></figure><ol><li>子查询的结果是单行单列的<br>子查询可以作为条件，使用运算符去判断。<br>运算符： <code>&gt;</code> <code>&gt;=</code> <code>&lt;</code> <code>&lt;=</code> <code>=</code></li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询员工工资小于平均工资的人</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.salary <span class="operator">&lt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">FROM</span> emp);</span><br><span class="line">子查询的结果是多行单列的</span><br><span class="line">子查询可以作为条件，使用运算符 <span class="keyword">IN</span> 来判断。</span><br><span class="line"><span class="keyword">sql</span></span><br><span class="line">复制代码</span><br><span class="line"><span class="comment">-- 查询&#x27;财务部&#x27;和&#x27;市场部&#x27;所有的员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> id <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;财务部&#x27;</span> <span class="keyword">OR</span> NAME <span class="operator">=</span> <span class="string">&#x27;市场部&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> dept_id <span class="operator">=</span> <span class="number">3</span> <span class="keyword">OR</span> dept_id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> dept_id <span class="keyword">IN</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> dept <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;财务部&#x27;</span> <span class="keyword">OR</span> NAME <span class="operator">=</span> <span class="string">&#x27;市场部&#x27;</span>);</span><br><span class="line">子查询的结果是多行多列的</span><br><span class="line">子查询可以作为一张虚拟表参与查询。</span><br><span class="line"><span class="keyword">sql</span></span><br><span class="line">复制代码</span><br><span class="line"><span class="comment">-- 查询员工入职日期是2011-11-11日之后的员工信息和部门信息</span></span><br><span class="line"><span class="comment">-- 子查询</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> dept t1, (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp <span class="keyword">WHERE</span> emp.`join_date` <span class="operator">&gt;</span> <span class="string">&#x27;2011-11-11&#x27;</span>) t2 </span><br><span class="line"><span class="keyword">WHERE</span> t1.id <span class="operator">=</span> t2.dept_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 普通内连接</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp t1, dept t2 <span class="keyword">WHERE</span> t1.`dept_id` <span class="operator">=</span> t2.`id` <span class="keyword">AND</span> t1.`join_date` <span class="operator">&gt;</span> <span class="string">&#x27;2011-11-11&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Chapter-1：绪论"><a href="#Chapter-1：绪论" class="headerlink" title="Chapter 1：绪论"></a>Chapter 1：绪论</h3><p>1.1 数据库的四个基本概念：<br>数据（data）：符号记录，数据的含义称为语义；</p><p>数据库（DataBase，DB）：长期存储在计算机内、有组织的可共享的大量数据的集合；</p><p>数据库管理系统（DataBase management System，DBMS）：位于用户和OS之间的一个基础软件；</p><p>包括几个功能：数据库定义语言DDL，数据库操纵语言DML，数据库的建立和维护等等。</p><p>数据库系统（DataBase System，DBS）：由DB、DBMS、应用程序和数据库管理员DBA组成的系统。</p><p>1.2 数据库管理的三个阶段：<br>人工管理阶段：没有OS，数据不保存，不共享，没有独立性，冗余度大；<br>文件系统阶段：有文件系统，数据保存，不共享，独立性差，冗余度大；<br>数据库系统阶段：数据结构化，共享性高，冗余度小，具有高度的物理独立性和一定的逻辑独立性。<br>1.3 数据模型：<br>包括两类，概念（信息）模型以及逻辑模型、物理模型。</p><p>概念模型：将现实世界的数据抽象建模。<br>实体（客观存在的东西），属性，码（唯一标识实体的属性集），实体型，实体集。</p><p>实体间的联系：一对一，一对多，多对多。</p><p>常用E-R模型。</p><p>逻辑模型：包括层次模型（树）、网状模型（图）、关系模型（表），面向对象模型等。<br>物理模型：数据的存储方式，存取方法。<br>1.4 数据库系统的三级模式结构<br>三级模式结构：外模式、模式和内模式。<br>模式：也称逻辑模式，所有用户的公共逻辑视图。一个数据库只有一个模式。</p><p>外模式：也称用户模式，是数据库用户的数据视图，与某一应用有关。每个用户只能访问相应外模式的数据。</p><p>内模式：也称存储模式，一个数据库只有一个内模式。是数据物理结构和存储方式的描述。</p><p>1.5 数据库的二级映像与数据独立性<br>外模式&#x2F;模式映像：一个模式可以有多个外模式，对于每个外模式有一个外模式&#x2F;模式映像，</p><p>数据的逻辑独立性：当模式改变时，只需要改变外模式&#x2F;模式映像，可以使外模式保持不变。</p><p>应用程序是根据外模式编写的，所以应用程序不变，保证了数据和程序的逻辑独立性。</p><p>模式&#x2F;内模式映像：模式&#x2F;内模式映像是唯一的。</p><p>数据的物理独立性：当存储结构改变时，只需要改变模式&#x2F;内模式映像，可以使模式保持不变。</p><p>所以应用程序不变，保证了数据和程序的物理独立性。</p><h3 id="Chapter-2：关系数据库"><a href="#Chapter-2：关系数据库" class="headerlink" title="Chapter 2：关系数据库"></a>Chapter 2：关系数据库</h3><p>2.1 关系的相关概念<br>关系就是一张二维表。</p><p>域（domin）：属性的取值范围。域的不同取值个数称为基数。</p><p>笛卡尔积：几组域相乘，得到的每条记录叫做一个元组，每个元组由分量组成。</p><p>笛卡尔积的基数是各个域的基数相乘的结果。</p><p>关系是笛卡尔积的子集。</p><p>关系的目或度：n个域做笛卡尔积，目就为n。单元关系，n &#x3D; 1。</p><p>候选码：候选码的值能唯一标识一个元组，它的子集不能。</p><p>主码：候选码中的一个。</p><p>主属性：候选码中的属性。非主属性：相反。</p><p>2.2 关系的完整性<br>实体完整性：主属性不能取空值；<br>参照完整性：若属性（组）F是关系R的外码，它与关系S的主码K相对应，则对于R中每个元组在F上的值：或者取空值，或者等于S中某个元组的主码值；<br>用户定义完整性：具体情况具体分析，比如用户姓名必须唯一，用户年龄必须大于0等等。<br>2.3 关系代数<br>传统的集合运算：二目运算，包括交、并、差和笛卡尔积。</p><p>对于并、差和交运算，两个运算的关系必须有相同的目，且相应属性取自同一个域。</p><p>对于笛卡尔积，两个n目和m目的关系运算后得到(n+m)目的关系。</p><p>专门的关系运算：包括选择、投影、连接、除运算。</p><p>象集：<br>解释：对于 x1 在 R 中的象集 Zx1，找到 R 中所有元组中 X 属性值 x1 对应的 Z 属性的值的集合，</p><p>就是{Z1,Z2,Z3}。</p><p>选择：行操作，针对筛选条件找出符合条件的元组（行）；</p><p>投影：列操作，找出对应属性的列；</p><p>连接：从两个关系的笛卡尔积中选取满足筛选条件的元组（行）。</p><p>等值连接：找到对应属性列的值相等的元组。</p><p>自然连接：一种特殊的等值连接，在等值连接的基础上删去重复列后的结果。从行和列两个角度考虑。</p><p>等值连接和自然连接的区别：</p><p>1）等值连接中不要求相等属性值的属性名相同，而自然连接要求相等属性值的属性名必须相同，即两关系只有在同名属性才能进行自然连接。</p><p>2）等值连接不将重复属性去掉，而自然连接去掉重复属性，也可以说，自然连接是去掉重复列的等值连接。</p><p>悬浮元组：自然连接时被舍弃的元组。</p><p>外连接：左、右两个关系的悬浮元组都保留的连接。<br>除运算：从行和列两个角度考虑。<br>设关系R除以关系S的结果为关系T，则T包含所有在R但不在S中的属性及其值，且T的元组与S的元组的所有组合都在R中。</p><h3 id="Chapter-3：关系数据库标准语言SQL"><a href="#Chapter-3：关系数据库标准语言SQL" class="headerlink" title="Chapter 3：关系数据库标准语言SQL"></a>Chapter 3：关系数据库标准语言SQL</h3><p>3.1 数据定义<br>主要数据定义语句：<br>一个关系数据库管理系统的实例中可以建立多个数据库，一个数据库中可以建立多个模式，一个模式通常包括多个表、视图、索引等。<br>模式的定义与删除<br>定义模式实际上定义了一个命名空间。<br>在这个空间中可以定义该模式包含的数据库对象，例如基本表、视图、索引等。<br>–[] 表示可选参数，schema-name表示模式名，下文类似<br>– 不加模式名则默认模式名为用户名user-name<br>CREATE SCHEMA [schema-name] AUTHORIZATION user-name;<br>– 创建模式的语句可以同时在模式中创建表，视图，授权的语句<br>– | 表示在多个选择中任意选择其中一个<br>CREATE SCHEMA [schema-name] AUTHORIZATION user-name<br>[CREATE TABLE(…) | CREATE VIEW view-name AS …| GRANT … ON … TO …];<br>– CASCADE表示级联，删除模式的同时删除它下面的所有数据库对象（表，视图等）<br>– RESTRICT表示限制，如果该模式中已经定义了下属的数据库对象，则拒绝该DROP语句执行<br>– 两者必选其一！<br>DROP SCHEMA schema-name &lt;CASCADE | RESTRICT&gt;;<br>基本表的定义、修改与删除<br>基本表的定义：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">table</span><span class="operator">-</span>name</span><br><span class="line">(</span><br><span class="line">    column1<span class="operator">-</span>name <span class="operator">&lt;</span>type<span class="operator">&gt;</span> [<span class="keyword">PRIMARY</span> KEY],</span><br><span class="line">    column2<span class="operator">-</span>name <span class="operator">&lt;</span>type<span class="operator">&gt;</span> [<span class="keyword">UNIQUE</span>],</span><br><span class="line">    column3<span class="operator">-</span>name <span class="operator">&lt;</span>type<span class="operator">&gt;</span> [<span class="keyword">NOT</span> <span class="keyword">NULL</span>], <span class="comment">-- 添加列级完整性约束</span></span><br><span class="line">    [<span class="keyword">PRIMARY</span> KEY(column2<span class="operator">-</span>name),] <span class="comment">-- 添加表级完整性约束</span></span><br><span class="line">    [<span class="keyword">FOREIGN</span> KEY(column2<span class="operator">-</span>name,column3<span class="operator">-</span>name) <span class="keyword">REFERENCES</span> table2<span class="operator">-</span>name(column4<span class="operator">-</span>name)]</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>– 示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Student</span><br><span class="line">(</span><br><span class="line">    Sno <span class="type">CHAR</span>(<span class="number">11</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    Sname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    Sage <span class="type">SMALLINT</span>,</span><br><span class="line">    Sbirth <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Course</span><br><span class="line">(</span><br><span class="line">    Cno <span class="type">CHAR</span>(<span class="number">4</span>) PRIAMRY KEY,</span><br><span class="line">    Cname <span class="type">VARCHAR</span>(<span class="number">12</span>) <span class="keyword">UNIQUE</span>,</span><br><span class="line">    Cpno <span class="type">CHAR</span>(<span class="number">4</span>),</span><br><span class="line">    Ccredit <span class="type">SMALLINT</span>,</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY(Cpno) <span class="keyword">REFERENCES</span> Course(Cno) <span class="comment">--外键，同一张表参照自己</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>– 示例：<br>每一个基本表都属于一个模式，定义基本表时可以显式加上模式名，</p><p>如CREATE TABLE schema-name.table-name();</p><p>也可以在定义模式的同时定义表，前面说过；</p><p>还有一种方式，设置好所属的模式，然后隐式的定义基本表。</p><p>基本表的修改：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">table</span><span class="operator">-</span>name</span><br><span class="line">[<span class="keyword">ADD</span> [<span class="keyword">COLUMN</span>] <span class="keyword">column</span><span class="operator">-</span>name <span class="operator">&lt;</span>type<span class="operator">&gt;</span> [<span class="keyword">NOT</span> <span class="keyword">NULL</span>]] <span class="comment">-- 添加新列</span></span><br><span class="line">[<span class="keyword">ADD</span> <span class="operator">&lt;</span><span class="keyword">PRIMARY</span> KEY(<span class="keyword">column</span><span class="operator">-</span>name)<span class="operator">&gt;</span>] <span class="comment">-- 添加表级完整性约束</span></span><br><span class="line">[<span class="keyword">DROP</span> [<span class="keyword">COLUMN</span>] <span class="keyword">column</span><span class="operator">-</span>name [CASCADE <span class="operator">|</span> RESTRICT]] <span class="comment">-- 删除列</span></span><br><span class="line">[<span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> <span class="keyword">constraint</span><span class="operator">-</span>name [CASCADE <span class="operator">|</span> RESTRICT]] <span class="comment">-- 删除完整性约束</span></span><br><span class="line">[<span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> <span class="keyword">column</span><span class="operator">-</span>name <span class="operator">&lt;</span>type<span class="operator">&gt;</span>]; <span class="comment">-- 修改列</span></span><br></pre></td></tr></table></figure><p>基本表的删除：<br>– CASCADE表示级联，删除表没有限制，同时删除它相关的依赖对象（视图等）<br>– RESTRICT表示限制，该表不能被其他表的约束所引用（如外键等），不能有视图，触发器等等<br>– 参数可加可不加，默认为RESTRICT<br>DROP TABLE table-name [CASCADE | RESTRICT];<br>索引的定义、修改与删除<br>索引的定义：<br>– UNIQUE表示该索引的每一个索引值只对应唯一的记录<br>– CLUSTER表示建立聚簇索引<br>– 索引可以建立在表的一列或者多列之上<br>– 每个列名后面可以加上可选参数次序，ASC表示升序，DESC表示降序<br>CREATE [UNIQUE] [CLUSTER] INDEX index-name<br>ON table-name(column1-name [ASC | DESC] [,column2-name, …]);<br>索引的修改：<br>– 对索引重命名<br>ALTER INDEX index-old_name RENAME TO index-new_name;<br>索引的删除：<br>DROP INDEX index-name;<br>3.2 数据查询<br>Bash<br>– DISTINCT 去掉列表达式所得结果的重复行<br>– ORDER BY每个列名后面可以加上可选参数次序，ASC表示升序，DESC表示降序<br>SELECT [ALL | DISTINCT] <column expression1> [,column expression2]<br>FROM table-name&#x2F;view-name [AS alias | alias]<br>[WHERE <condition expression>]<br>[GROUP BY column-name [HAVING <condition expression>]]<br>[ORDER BY column-name [ASC | DESC]];<br>– 示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sdept,Grade</span><br><span class="line"><span class="keyword">FROM</span> Student <span class="keyword">AS</span> st</span><br><span class="line"><span class="keyword">WHERE</span> Sdept <span class="keyword">NOT</span> <span class="keyword">IN</span>(<span class="string">&#x27;CS&#x27;</span>,<span class="string">&#x27;IC&#x27;</span>) <span class="keyword">AND</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27;_阳&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Grade <span class="keyword">DESC</span>;</span><br><span class="line"><span class="comment">-- LIKE 表达式中，%表示任意长度字符，_表示任意单个字符，\表示转义；相应地有NOT LIKE</span></span><br></pre></td></tr></table></figure><p>聚集函数：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="comment">-- 统计元组个数</span></span><br><span class="line"><span class="built_in">COUNT</span>( [<span class="keyword">DISTINCT</span> <span class="operator">|</span> <span class="keyword">ALL</span>] <span class="keyword">column</span><span class="operator">-</span>name)</span><br><span class="line"><span class="built_in">SUM</span>( [<span class="keyword">DISTINCT</span> <span class="operator">|</span> <span class="keyword">ALL</span>] <span class="keyword">column</span><span class="operator">-</span>name)</span><br><span class="line"><span class="built_in">AVG</span>( [<span class="keyword">DISTINCT</span> <span class="operator">|</span> <span class="keyword">ALL</span>] <span class="keyword">column</span><span class="operator">-</span>name)</span><br><span class="line"><span class="built_in">MAX</span>( [<span class="keyword">DISTINCT</span> <span class="operator">|</span> <span class="keyword">ALL</span>] <span class="keyword">column</span><span class="operator">-</span>name)</span><br><span class="line"><span class="built_in">MIN</span>( [<span class="keyword">DISTINCT</span> <span class="operator">|</span> <span class="keyword">ALL</span>] <span class="keyword">column</span><span class="operator">-</span>name)</span><br><span class="line"><span class="comment">-- 示例：</span></span><br><span class="line"><span class="keyword">SELECT</span> Sno</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">3</span>;</span><br><span class="line">注意：聚集函数只能用于<span class="keyword">SELECT</span>子句和<span class="keyword">GROUP</span> <span class="keyword">BY</span>中的<span class="keyword">HAVING</span>子句，不能用于<span class="keyword">WHERE</span>中的条件表达式！</span><br><span class="line"></span><br><span class="line"><span class="built_in">count</span>(<span class="number">1</span>)、<span class="built_in">count</span>(<span class="operator">*</span>)与<span class="built_in">count</span>(列名)的执行区别详解参考文章。</span><br><span class="line"></span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>)、<span class="built_in">count</span>(<span class="number">1</span>)包括了所有的列，相当于行数，在统计结果的时候， 不会忽略列值为NUL。</span><br><span class="line"></span><br><span class="line"><span class="built_in">count</span>(列名)只包括列名那一列，在统计结果的时候，会忽略列值为<span class="keyword">NULL</span>。</span><br><span class="line"></span><br><span class="line">连接查询：</span><br><span class="line"></span><br><span class="line">C<span class="operator">+</span><span class="operator">+</span></span><br><span class="line"><span class="comment">-- 示例：自然连接，可以是两张以上的表，表可以相同或者不同，还可以是嵌套查询</span></span><br><span class="line"><span class="keyword">SELECT</span> st.Sno,st.Sname</span><br><span class="line"><span class="keyword">FROM</span> Student st,SC sc</span><br><span class="line"><span class="keyword">WHERE</span> st.Sno <span class="operator">=</span> sc.Sno <span class="keyword">AND</span> sc.Cno <span class="operator">=</span> <span class="string">&#x27;2&#x27;</span> <span class="keyword">AND</span> sc.Grade <span class="operator">&gt;</span> <span class="number">90</span>;</span><br><span class="line"><span class="comment">-- 示例：外连接，这里的SQL标准写法和MySQL写法稍有不同</span></span><br><span class="line"><span class="keyword">SELECT</span> st.Sname,st.Sno</span><br><span class="line"><span class="keyword">FROM</span> Student st <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> SC sc <span class="keyword">ON</span> (st.Sno <span class="operator">=</span> sc.Sno);</span><br><span class="line">带有<span class="keyword">ANY</span>(<span class="keyword">SOME</span>)或<span class="keyword">ALL</span>谓词的子查询：</span><br><span class="line"></span><br><span class="line">Bash</span><br><span class="line"><span class="operator">&lt;</span>comparison operator<span class="operator">&gt;</span> <span class="keyword">ANY</span><span class="operator">/</span><span class="keyword">ALL</span> <span class="comment">-- 比较运算符可以是&gt;，&lt;，=，!=之类的</span></span><br><span class="line"><span class="comment">-- 示例：</span></span><br><span class="line"><span class="keyword">SELECT</span> Sname,Sage</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sage <span class="operator">&gt;</span> <span class="keyword">ANY</span>(</span><br><span class="line"><span class="keyword">SELECT</span> Sage <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sdept<span class="operator">=</span><span class="string">&#x27;CS&#x27;</span>)</span><br><span class="line"><span class="keyword">AND</span> Sdept <span class="operator">!=</span> <span class="string">&#x27;CS&#x27;</span>;</span><br><span class="line">带有<span class="keyword">EXISTS</span><span class="operator">/</span><span class="keyword">NOT</span> <span class="keyword">EXISTS</span>谓词的子查询：结果返回逻辑值真或者假。</span><br><span class="line"></span><br><span class="line">C<span class="operator">+</span><span class="operator">+</span></span><br><span class="line"><span class="comment">-- EXISTS若内层查询结果非空，则外层的WHERE子句返回真值；NOT EXISTS相反。</span></span><br><span class="line"><span class="comment">-- 示例：查询选修了全部课程的学生姓名；等价于查询这样的学生的姓名，没有一门课程是他不选修的</span></span><br><span class="line"><span class="keyword">SELECT</span> Sname</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Course</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">WHERE</span> Sno <span class="operator">=</span> Student.Sno</span><br><span class="line"><span class="keyword">AND</span> Cno <span class="operator">=</span> Course.Cno));</span><br><span class="line">集合查询：</span><br><span class="line"></span><br><span class="line">Bash</span><br><span class="line"><span class="comment">-- 集合操作主要包括并操作UNION，交操作INTERSECT，差操作EXCEPT</span></span><br><span class="line"><span class="comment">-- 示例：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept <span class="operator">=</span> <span class="string">&#x27;CS&#x27;</span></span><br><span class="line"><span class="keyword">INTERSECT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sage <span class="operator">&gt;</span> <span class="number">18</span>;</span><br><span class="line"><span class="number">3.3</span> 数据更新</span><br><span class="line">注意区别数据修改和基本表属性列的修改！</span><br><span class="line"></span><br><span class="line">插入数据：</span><br><span class="line"></span><br><span class="line">Java</span><br><span class="line"><span class="comment">-- 插入一个元组，注意：MySQL中可以一次插入一条或多条数据，逗号分隔 values(...),(...);</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">table</span><span class="operator">-</span>name [(column1<span class="operator">-</span>name[,column2<span class="operator">-</span>name])]</span><br><span class="line"><span class="keyword">VALUES</span> (value1[,<span class="keyword">value</span>]);</span><br><span class="line"><span class="comment">-- 属性列是可选参数，不加默认为表的全部属性列</span></span><br><span class="line"><span class="comment">-- 示例：</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Student(Sname,Sage)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;lihua&#x27;</span>,<span class="number">19</span>);</span><br><span class="line">插入子查询结果：可以批量生成数据</span><br><span class="line"></span><br><span class="line">CSS</span><br><span class="line"><span class="comment">-- 示例：</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Dept_age(Sdept,Avg_age)</span><br><span class="line"><span class="keyword">SELECT</span> Sdept,<span class="built_in">AVG</span>(Sage)</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Sdept;</span><br><span class="line">修改数据：</span><br><span class="line"></span><br><span class="line">HTML</span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">table</span><span class="operator">-</span>name</span><br><span class="line"><span class="keyword">SET</span> column1<span class="operator">-</span>name <span class="operator">=</span> <span class="operator">&lt;</span>expression1<span class="operator">&gt;</span>[,column2<span class="operator">-</span>name <span class="operator">=</span> <span class="operator">&lt;</span>expression2<span class="operator">&gt;</span>] ...</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span><span class="keyword">condition</span> expression<span class="operator">&gt;</span>]; <span class="comment">-- 可选参数</span></span><br><span class="line"><span class="comment">-- 示例：</span></span><br><span class="line"><span class="keyword">UPDATE</span> SC</span><br><span class="line"><span class="keyword">SET</span> Grade <span class="operator">=</span> <span class="number">0</span>; <span class="comment">-- SC中所有元组的Grade都置零</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> SC</span><br><span class="line"><span class="keyword">SET</span> Grade <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">WHERE</span> Sno <span class="keyword">IN</span>(</span><br><span class="line"><span class="keyword">SELECT</span> Sno</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept <span class="keyword">IN</span>(<span class="string">&#x27;CS&#x27;</span>,<span class="string">&#x27;MA&#x27;</span>));</span><br><span class="line">删除数据：</span><br><span class="line"></span><br><span class="line">Bash</span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">table</span><span class="operator">-</span>name</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span><span class="keyword">condition</span> expression<span class="operator">&gt;</span>]; <span class="comment">-- 可选参数</span></span><br><span class="line"><span class="comment">-- 示例：</span></span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sno <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">FROM</span> SC; <span class="comment">-- 删除SC表中所有的记录</span></span><br></pre></td></tr></table></figure><p>3.4 视图<br>视图是从一个或多个表中导出的虚表。数据库中只存放视图的定义，数据任存放在原来的基本表中。</p><p>建立视图：</p><p>视图可以建立在一个或多个基本表之上，也可以建立在一个或多个视图之上，或者视图和基本表之上。</p><p>行列子集视图：从单个基本表导出的，仅仅去掉某些行和列，保留主码。<br>– WITH CHECK OPTION表示对视图进行增删改操作时保证操作的元组满足sub select中的条件表达式<br>– 若省略视图的各个属性列名，则默认该视图由sub select中目标列组成</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> <span class="keyword">view</span><span class="operator">-</span>name [(column1<span class="operator">-</span>name[,column2<span class="operator">-</span>name])]</span><br><span class="line"><span class="keyword">AS</span> <span class="operator">&lt;</span>sub <span class="keyword">select</span><span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">CHECK</span> OPTION];</span><br><span class="line"><span class="comment">-- 示例：</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> <span class="keyword">view</span>(Sno,Sname)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> Sno,Sname,Sage</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept <span class="operator">=</span> <span class="string">&#x27;IS&#x27;</span></span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">CHECK</span> OPTION; <span class="comment">-- 以后对view进行增删改操作时数据库系统会自动加上 Sdept = &#x27;IS&#x27;</span></span><br><span class="line">删除视图：<span class="operator">=</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> <span class="keyword">view</span><span class="operator">-</span>name [CASCADE];</span><br></pre></td></tr></table></figure><p>查询视图：和查询基本表一样。</p><p>对视图的查询，首先会检查视图是否存在。如果存在，则取出视图的定义，然后把定义中的子查询和用户的查询结合起来，转换成等价的对基本表的查询，然后执行查询。这一转换过程称为视图消解（view resolution）。</p><p>对于非行列子集视图的查询不一定能做正常的转换，如下图所示。<br>也可以用如下的基于派生表的查询来完成：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span> Sno,<span class="built_in">AVG</span>(Grade)</span><br><span class="line">     <span class="keyword">FROM</span> SC</span><br><span class="line">     <span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno) <span class="keyword">AS</span> TEMP(Sno,Gravg)</span><br><span class="line"><span class="keyword">WHERE</span> Gravg <span class="operator">&gt;=</span> <span class="number">90</span>;</span><br></pre></td></tr></table></figure><p>视图与派生表的区别：视图定义之后持久化保存在数据字典中，而派生表只是临时定义，类似局部变量。</p><p>更新视图：类似查询视图，对视图的更新操作也是通过视图消解转换为对基本表的更新。</p><p>更新视图的语句和更新基本表一样，如果定义视图时加上WITH CHECK OPTION可选参数，则视图消解时会自动附带定义视图时子查询中的条件表达式。</p><p>更新视图的限制：</p><p>一些视图是不可更新的，因为对这些视图的更新不能唯一地有意义地转换成对相应基本表的更新；<br>允许对行列子集视图进行更新；<br>对其他类型视图的更新不同系统有不同限制。<br>视图的作用：</p><h3 id="Chapter-4：数据库完整性"><a href="#Chapter-4：数据库完整性" class="headerlink" title="Chapter 4：数据库完整性"></a>Chapter 4：数据库完整性</h3><p>5.1 实体完整性<br>实体完整性在定义基本表时用主键定义。可以定义为列级或表级约束条件。</p><p>每当用户对基本表插入记录或对主键列进行更新操作时，将检查主键值是否唯一，主键各属性是否为空。</p><p>5.2 参照完整性<br>参照完整性在定义基本表时用外键定义。</p><p>对被参照表和参照表进行增删改时有可能破坏参照完整性。</p><p>当发生不一致时，有三种处理策略：</p><p>拒绝（NO ACTION）执行<br>级联（CASCADE）操作<br>设置为空值（NULL）<br>5.3 用户定义完整性<br>用户定义完整性在定义基本表时定义属性上的约束条件。</p><p>主要包括：</p><p>列值非空（NOT NULL）<br>列值唯一（UNIQUE）<br>检查列值是否满足 CHECK 条件表达式<br>– 示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Student</span><br><span class="line">(</span><br><span class="line">Sno <span class="type">CHAR</span>(<span class="number">9</span>) <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    Sname <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    Ssex <span class="type">CHAR</span>(<span class="number">2</span>) <span class="keyword">CHECK</span>(Ssex <span class="keyword">IN</span>(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)),</span><br><span class="line">    Sleader <span class="type">CHAR</span>(<span class="number">9</span>),</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY(Sleader) <span class="keyword">REFERENCES</span> Student(Sno),</span><br><span class="line">    <span class="keyword">CHECK</span>(Sname <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;MS.%&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>5.4 完整性约束命名子句</p><p>– constraint condition 包括NOT NULL,UNIQUE,PRIMARY KEY,FOREIGN KEY,CHECK 短语等<br>CONSTRAINT constraint-name <constraint condition>;<br>– 示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Student</span><br><span class="line">(</span><br><span class="line">Sno <span class="type">CHAR</span>(<span class="number">9</span>)</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> C1 <span class="keyword">CHECK</span>(Sno <span class="keyword">BETWEEN</span> <span class="number">10001</span> <span class="keyword">AND</span> <span class="number">20001</span>),</span><br><span class="line">    Sname <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    Ssex <span class="type">CHAR</span>(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> C2 <span class="keyword">CHECK</span>(Ssex <span class="keyword">IN</span>(<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>)),</span><br><span class="line">    Sleader <span class="type">CHAR</span>(<span class="number">9</span>),</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> C3 <span class="keyword">PRIMARY</span> KEY(Sno)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="Chapter-5：关系数据理论"><a href="#Chapter-5：关系数据理论" class="headerlink" title="Chapter 5：关系数据理论"></a>Chapter 5：关系数据理论</h3><p>6.1 问题提出<br>关系模式存在的问题：<br>数据冗余：不能避免，只能降低<br>更新异常：可以避免<br>插入异常：可以避免<br>删除异常：可以避免<br>一个好的关系模式应当不会发生以上三种异常，数据冗余尽可能低。<br>6.2 规范化<br>函数依赖：<br>函数依赖重点在于函数，稍微学过数学的人都知道函数的定义，定义域中两个相同的值不可能映射到不同的值域中的值，否则就不叫函数依赖。<br>码：<br>若一个或一组属性K完全函数确定关系R的全体属性U，则称为R的候选码。<br>若关系R的全体属性U部分函数依赖于K，则K称为超码。<br>候选码多于一个时，选择其中一个作为关系R的主码。<br>包含在任意一个候选码中的属性称为主属性。非主属性相反。<br>6.3 范式<br>关系数据库中的关系要满足一定的要求，满足不同程度要求的为不同范式。<br>范式由低级到高级：1NF –&gt; 2NF –&gt; 3NF –&gt; BCNF –&gt; 4NF –&gt; 5NF，<br>要求越来越高，高级范式一定满足低级范式的要求。<br>一个低一级的范式可以通过模式分解转换为若干个高一级范式的关系模式的集合，这个过程称为规范化。<br>对于一个关系R，也并非范式越高越好。<br>第一范式（1NF）：每一个分量必须是不可分的数据项；<br>第一范式是对关系模式的最起码的要求。不满足第一范式的数据库模式不能称为关系数据库。<br>第二范式（2NF）：若关系R满足1NF，且每一个非主属性完全函数依赖于任何一个候选码，则R满足2NF；<br>第三范式（3NF）：若关系R中每一个非主属性既不传递依赖于码，也不部分依赖于码，则R满足3NF；<br>BC范式（BCNF）：若关系R中每一个决定因素都包含码，则R满足BCNF。<br>BCNF消除了主属性对码的部分和传递函数依赖。</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自制加密弹窗</title>
      <link href="/2024/11/09/jiami/"/>
      <url>/2024/11/09/jiami/</url>
      
        <content type="html"><![CDATA[<div class="tip info"><p>hexo的加密弹窗有点问题，所以自己写了一个简单的加密弹窗，因为不涉及服务器 实现在本地，加密效果不是很好 但巧妙的利用一点编码技巧 使别人即使F12也不知道密码是啥还得去找解码工具  还实现了 别人调试就会跳转到指定网站 即使有些机灵鬼提前打开调试 或者查看源码 亦或者通过浏览器设置打开调试 都会跳转到百度 但终究是前端 无法真正实现绝对的加密 下面是实现代码</p></div><h3 id="禁止F12"><a href="#禁止F12" class="headerlink" title="禁止F12"></a>禁止F12</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">(function securePage() &#123;</span><br><span class="line">     const redirectURL = &#x27;https://www.pornhub.com/&#x27;; // 填写您的博客地址</span><br><span class="line">     </span><br><span class="line">     const warningMessage = `</span><br><span class="line">       &lt;div style=&quot;</span><br><span class="line">         position: fixed;</span><br><span class="line">         top: 0;</span><br><span class="line">         left: 0;</span><br><span class="line">         width: 100%;</span><br><span class="line">         height: 100%;</span><br><span class="line">         background: rgba(255, 255, 255, 0.8);</span><br><span class="line">         background: url(&#x27;https://t.alcy.cc/ycy&#x27;) no-repeat center center; </span><br><span class="line">         background-size: cover; </span><br><span class="line">         color: pink;</span><br><span class="line">         font-size: 40px;</span><br><span class="line">         text-align: center;</span><br><span class="line">         display: flex;</span><br><span class="line">         justify-content: center;</span><br><span class="line">         align-items: center;</span><br><span class="line">         z-index: 9999;</span><br><span class="line">         font-family: Arial, sans-serif;</span><br><span class="line">       &quot;&gt;</span><br><span class="line">         &lt;div&gt;</span><br><span class="line">           &lt;h1&gt;检测到非法调试！即将跳转首页&lt;/h1&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">       &lt;/div&gt;</span><br><span class="line">     `;</span><br><span class="line">   </span><br><span class="line">     function showWarning() &#123;</span><br><span class="line">       document.body.innerHTML = warningMessage; </span><br><span class="line">     &#125;</span><br><span class="line">   </span><br><span class="line">     document.addEventListener(&#x27;contextmenu&#x27;, function(e) &#123;</span><br><span class="line">       e.preventDefault();</span><br><span class="line">       showWarning();</span><br><span class="line">       setTimeout(() =&gt; window.location.href = redirectURL, 5000); </span><br><span class="line">     &#125;);</span><br><span class="line">   </span><br><span class="line">     document.addEventListener(&#x27;keydown&#x27;, function(e) &#123;</span><br><span class="line">       const forbiddenKeys = [</span><br><span class="line">         &#123; ctrl: true, shift: true, key: &#x27;I&#x27; &#125;,</span><br><span class="line">         &#123; ctrl: true, shift: true, key: &#x27;J&#x27; &#125;,</span><br><span class="line">         &#123; ctrl: true, shift: true, key: &#x27;C&#x27; &#125;,</span><br><span class="line">         &#123; ctrl: true, key: &#x27;U&#x27; &#125;,</span><br><span class="line">         &#123; key: &#x27;F12&#x27; &#125;</span><br><span class="line">       ];</span><br><span class="line">       forbiddenKeys.forEach(combo =&gt; &#123;</span><br><span class="line">         if (</span><br><span class="line">           (combo.ctrl ? e.ctrlKey : true) &amp;&amp;</span><br><span class="line">           (combo.shift ? e.shiftKey : true) &amp;&amp;</span><br><span class="line">           (combo.key ? e.key.toUpperCase() === combo.key : true)</span><br><span class="line">         ) &#123;</span><br><span class="line">           e.preventDefault();</span><br><span class="line">           showWarning(); </span><br><span class="line">           setTimeout(() =&gt; window.location.href = redirectURL, 5000); </span><br><span class="line">         &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">     &#125;);</span><br><span class="line">   </span><br><span class="line">     function detectDebugger() &#123;</span><br><span class="line">       let isDebuggerOpen = false;</span><br><span class="line">       const threshold = 100; </span><br><span class="line">   </span><br><span class="line">       setInterval(() =&gt; &#123;</span><br><span class="line">         const start = Date.now();</span><br><span class="line">         debugger; </span><br><span class="line">         const duration = Date.now() - start;</span><br><span class="line">         if (duration &gt; threshold) &#123;</span><br><span class="line">           if (!isDebuggerOpen) &#123;</span><br><span class="line">             isDebuggerOpen = true;</span><br><span class="line">             showWarning(); </span><br><span class="line">             setTimeout(() =&gt; window.location.href = redirectURL, 5000); </span><br><span class="line">           &#125;</span><br><span class="line">         &#125; else &#123;</span><br><span class="line">           isDebuggerOpen = false;</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;, 1000);</span><br><span class="line">     &#125;</span><br><span class="line">   </span><br><span class="line">     window.addEventListener(&#x27;error&#x27;, function(event) &#123;</span><br><span class="line">       if (event.message === &#x27;Script error.&#x27; &amp;&amp; !event.filename) &#123;</span><br><span class="line">         showWarning(); </span><br><span class="line">         setTimeout(() =&gt; window.location.href = redirectURL, 5000); </span><br><span class="line">       &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">     detectDebugger();</span><br><span class="line">   &#125;)();&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="加密弹窗逻辑代码"><a href="#加密弹窗逻辑代码" class="headerlink" title="加密弹窗逻辑代码"></a>加密弹窗逻辑代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"> const encodedPassword = &quot;这里填写你的密码的base64编码&quot;; //找个base64编码工具编码一下你想要的密码后 </span><br><span class="line">  // 有点长，上面注释我换到这行来写：将base64编码后的字符串填入encodedPassword = &quot;这里填写你的密码的base64编码&quot;的引号中即可</span><br><span class="line">  const decodedPassword = atob(encodedPassword);</span><br><span class="line"></span><br><span class="line">  function checkPassword() &#123;</span><br><span class="line">    const enteredPassword = document.getElementById(&quot;passwordInput&quot;).value;</span><br><span class="line">    if (enteredPassword === decodedPassword) &#123;</span><br><span class="line">      document.getElementById(&#x27;popupOverlay&#x27;).style.display = &#x27;none&#x27;;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      alert(&quot;密码错误，请重新输入！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  document.getElementById(&quot;passwordInput&quot;).addEventListener(&quot;keypress&quot;, function(event) &#123;</span><br><span class="line">    if (event.key === &quot;Enter&quot;) &#123;</span><br><span class="line">      checkPassword();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  window.onload = function() &#123;</span><br><span class="line">    document.getElementById(&#x27;popupOverlay&#x27;).style.display = &#x27;flex&#x27;;</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="弹窗样式"><a href="#弹窗样式" class="headerlink" title="弹窗样式"></a>弹窗样式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> &lt;style&gt;</span><br><span class="line">  .popup-overlay &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    background: rgba(0, 0, 0, 0.6);</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">    z-index: 10;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .popup-content &#123;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    max-width: 400px;</span><br><span class="line">    width: 90%;</span><br><span class="line">    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .popup-content h2 &#123;</span><br><span class="line">    color: #333;</span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .popup-content p &#123;</span><br><span class="line">    color: #555;</span><br><span class="line">    margin-bottom: 20px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  input[type=&quot;password&quot;] &#123;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    border: 2px solid #ddd;</span><br><span class="line">    border-radius: 8px;</span><br><span class="line">    width: 80%;</span><br><span class="line">    margin-bottom: 20px;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  button &#123;</span><br><span class="line">    padding: 10px 20px;</span><br><span class="line">    color: #fff;</span><br><span class="line">    background-color: #007bff;</span><br><span class="line">    border: none;</span><br><span class="line">    border-radius: 4px;</span><br><span class="line">    cursor: pointer;</span><br><span class="line">    transition: background-color 0.3s ease;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  button:hover &#123;</span><br><span class="line">    background-color: #0056b3;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="弹窗内容"><a href="#弹窗内容" class="headerlink" title="弹窗内容"></a>弹窗内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;div class=&quot;popup-overlay&quot; id=&quot;popupOverlay&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;popup-content&quot;&gt;</span><br><span class="line">    &lt;h2&gt; 这里是弹窗标题&lt;/h2&gt;</span><br><span class="line">    &lt;p&gt;这里是弹窗说明&lt;/p&gt;</span><br><span class="line">    &lt;input type=&quot;password&quot; id=&quot;passwordInput&quot; placeholder=&quot;联系博主获取密码&quot;&gt;</span><br><span class="line">    &lt;button onclick=&quot;checkPassword()&quot;&gt;查看&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="若有疑问-请评论或者联系博主-也可在移动端点击右下角的在线聊天-与我联系"><a href="#若有疑问-请评论或者联系博主-也可在移动端点击右下角的在线聊天-与我联系" class="headerlink" title="若有疑问 请评论或者联系博主 也可在移动端点击右下角的在线聊天 与我联系"></a>若有疑问 请评论或者联系博主 也可在移动端点击右下角的在线聊天 与我联系</h3>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tomcat安装使用教程</title>
      <link href="/2024/11/05/tomcat-tutorial/"/>
      <url>/2024/11/05/tomcat-tutorial/</url>
      
        <content type="html"><![CDATA[<h1 id="Tomcat-安装使用教程"><a href="#Tomcat-安装使用教程" class="headerlink" title="Tomcat 安装使用教程"></a>Tomcat 安装使用教程</h1><blockquote><p>注：本教程由 <a href="https://sakurablogs.top/">kasumiTech&#x2F;sakura</a> 制作</p></blockquote><h2 id="1-下载-Tomcat"><a href="#1-下载-Tomcat" class="headerlink" title="1. 下载 Tomcat"></a>1. 下载 Tomcat</h2><p>前往官网：<a href="https://tomcat.apache.org/download-90.cgi">https://tomcat.apache.org/download-90.cgi</a><br>依照下图所示下载：<br><img src="https://cdn.z.wiki/autoupload/20241105/vxOz/865X463/image.png" alt="下载示例"></p><h2 id="2-前往文件管理解压"><a href="#2-前往文件管理解压" class="headerlink" title="2. 前往文件管理解压"></a>2. 前往文件管理解压</h2><p>因为是日常学习使用，建议解压在 D 盘，且单独存在一个文件夹下。<br>我们下载的为 zip 格式，电脑直接右键解压即可，无需第三方解压软件。<br><img src="https://cdn.z.wiki/autoupload/20241105/SkIQ/686X869/image.png" alt="解压示例"></p><h2 id="3-配置"><a href="#3-配置" class="headerlink" title="3. 配置"></a>3. 配置</h2><p>我们会得到如下文件夹：<br><img src="https://cdn.z.wiki/autoupload/20241105/Jidg/735X404/image.png" alt="文件夹示例"></p><ul><li><code>bin</code> 是执行文件</li><li><code>conf</code> 是配置文件</li><li><code>lib</code> 是 jar 包</li><li><code>logs</code> 是日志</li><li><code>temp</code> 是临时文件</li></ul><p>打开 <code>bin</code> 文件夹，找到 <code>startup.bat</code>（这里拓展一下哈，bat 是批命令，在计算机中一些繁琐的操作我们可以通过编写 bat 文件来实现）。</p><p>好吧，进入正题。一般来说，你点击 <code>startup.bat</code> 会一闪而过，那么就是你的环境没有配置好。安装jdk，版本其实无所谓，新一点最好了（bushi），建议jdk17。</p><p>那么直接就是下一步：增加环境变量。</p><p>步骤是：打开设置 → 系统设置 → 高级系统设置 → 环境变量，然后新建一个环境变量，这里建议建在用户变量下面，就是你自己电脑用户名。<br><img src="https://cdn.z.wiki/autoupload/20241105/3cUY/541X114/image.png?type=ha" alt="环境变量设置示例"><br><img src="https://cdn.z.wiki/autoupload/20241105/eIen/865X217/image.png" alt="环境变量设置示例"></p><p>现在你去打开，肯定不会一闪而退了。天呐，你真棒，开开心心学习啦！</p><h2 id="4-乱码问题"><a href="#4-乱码问题" class="headerlink" title="4. 乱码问题"></a>4. 乱码问题</h2><p><strong>Oh FUCK！怎么命令行里面是乱码的，看着好难受。</strong><br>那么，多半文字编号有误呀。那就 win+r 输入 <code>cmd</code> 查看一下，然后输入 <code>chcp</code> 查看。<br>如果显示活动代码页为: 936，说明文字编码是 GB2312，那么就去改一下配置文件。上面说过 <code>conf</code> 是配置文件，打开这个文件夹，找到下图所示文件：<br><img src="https://cdn.z.wiki/autoupload/20241105/p0YW/865X361/image.png" alt="配置文件示例"></p><p>用编辑器打开修改一下，记事本也行的哈，把代码中的 <code>utf-8</code> 改为 <code>GB2312</code>。算了，无脑复制吧，把本身的代码删了，复制下面的代码（也许版本差异不适用）：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"># See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"># limitations under the License.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">handlers</span> = <span class="string">1catalina.org.apache.juli.AsyncFileHandler, 2localhost.org.apache.juli.AsyncFileHandler, 3manager.org.apache.juli.AsyncFileHandler, 4host-manager.org.apache.juli.AsyncFileHandler, java.util.logging.ConsoleHandler</span></span><br><span class="line"></span><br><span class="line"><span class="attr">.handlers</span> = <span class="string">1catalina.org.apache.juli.AsyncFileHandler, java.util.logging.ConsoleHandler</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">############################################################</span></span><br><span class="line"><span class="comment"># Handler specific properties.</span></span><br><span class="line"><span class="comment"># Describes specific configuration info for Handlers.</span></span><br><span class="line"><span class="comment">############################################################</span></span><br><span class="line"></span><br><span class="line"><span class="attr">1catalina.org.apache.juli.AsyncFileHandler.level</span> = <span class="string">FINE</span></span><br><span class="line"><span class="attr">1catalina.org.apache.juli.AsyncFileHandler.directory</span> = <span class="string">$&#123;catalina.base&#125;/logs</span></span><br><span class="line"><span class="attr">1catalina.org.apache.juli.AsyncFileHandler.prefix</span> = <span class="string">catalina.</span></span><br><span class="line"><span class="attr">1catalina.org.apache.juli.AsyncFileHandler.maxDays</span> = <span class="string">90</span></span><br><span class="line"><span class="attr">1catalina.org.apache.juli.AsyncFileHandler.encoding</span> = <span class="string">GB-2312</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2localhost.org.apache.juli.AsyncFileHandler.level</span> = <span class="string">FINE</span></span><br><span class="line"><span class="attr">2localhost.org.apache.juli.AsyncFileHandler.directory</span> = <span class="string">$&#123;catalina.base&#125;/logs</span></span><br><span class="line"><span class="attr">2localhost.org.apache.juli.AsyncFileHandler.prefix</span> = <span class="string">localhost.</span></span><br><span class="line"><span class="attr">2localhost.org.apache.juli.AsyncFileHandler.maxDays</span> = <span class="string">90</span></span><br><span class="line"><span class="attr">2localhost.org.apache.juli.AsyncFileHandler.encoding</span> = <span class="string">GB-2312</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3manager.org.apache.juli.AsyncFileHandler.level</span> = <span class="string">FINE</span></span><br><span class="line"><span class="attr">3manager.org.apache.juli.AsyncFileHandler.directory</span> = <span class="string">$&#123;catalina.base&#125;/logs</span></span><br><span class="line"><span class="attr">3manager.org.apache.juli.AsyncFileHandler.prefix</span> = <span class="string">manager.</span></span><br><span class="line"><span class="attr">3manager.org.apache.juli.AsyncFileHandler.maxDays</span> = <span class="string">90</span></span><br><span class="line"><span class="attr">3manager.org.apache.juli.AsyncFileHandler.encoding</span> = <span class="string">GB-2312</span></span><br><span class="line"></span><br><span class="line"><span class="attr">4host-manager.org.apache.juli.AsyncFileHandler.level</span> = <span class="string">FINE</span></span><br><span class="line"><span class="attr">4host-manager.org.apache.juli.AsyncFileHandler.directory</span> = <span class="string">$&#123;catalina.base&#125;/logs</span></span><br><span class="line"><span class="attr">4host-manager.org.apache.juli.AsyncFileHandler.prefix</span> = <span class="string">host-manager.</span></span><br><span class="line"><span class="attr">4host-manager.org.apache.juli.AsyncFileHandler.maxDays</span> = <span class="string">90</span></span><br><span class="line"><span class="attr">4host-manager.org.apache.juli.AsyncFileHandler.encoding</span> = <span class="string">GB-2312</span></span><br><span class="line"></span><br><span class="line"><span class="attr">java.util.logging.ConsoleHandler.level</span> = <span class="string">FINE</span></span><br><span class="line"><span class="attr">java.util.logging.ConsoleHandler.formatter</span> = <span class="string">org.apache.juli.OneLineFormatter</span></span><br><span class="line"><span class="attr">java.util.logging.ConsoleHandler.encoding</span> = <span class="string">GB-2312</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">############################################################</span></span><br><span class="line"><span class="comment"># Facility specific properties.</span></span><br><span class="line"><span class="comment"># Provides extra control for each logger.</span></span><br><span class="line"><span class="comment">############################################################</span></span><br><span class="line"></span><br><span class="line"><span class="attr">org.apache.catalina.core.ContainerBase.[Catalina].[localhost].level</span> = <span class="string">INFO</span></span><br><span class="line"><span class="attr">org.apache.catalina.core.ContainerBase.[Catalina].[localhost].handlers</span> = <span class="string">2localhost.org.apache.juli.AsyncFileHandler</span></span><br><span class="line"></span><br><span class="line"><span class="attr">org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].level</span> = <span class="string">INFO</span></span><br><span class="line"><span class="attr">org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].handlers</span> = <span class="string">3manager.org.apache.juli.AsyncFileHandler</span></span><br><span class="line"></span><br><span class="line"><span class="attr">org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].level</span> = <span class="string">INFO</span></span><br><span class="line"><span class="attr">org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].handlers</span> = <span class="string">4host-manager.org.apache.juli.AsyncFileHandler</span></span><br></pre></td></tr></table></figure><p>修改之后，再次运行，文字就不会乱码了，嘻嘻，感觉自己真棒！</p><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><p>启动之后，电脑浏览器地址栏（注意是地址栏）输入<a href="http://localhost:8080/">8080端口网站</a>，打开看到如下界面就大功告成了：<br><img src="https://cdn.z.wiki/autoupload/20241105/OUrM/865X540/image.png" alt="验证示例"></p><h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><p>为了以便于我们在idea等工具中调试使用，我们需要配置一下。<br>打开设置 → 系统设置 → 高级系统设置 → 环境变量，然后新建一个环境变量，这里建议建在系统变量下面进行后续操作。</p><span class='p red'>点击展开</span>嘻嘻<details class="folding-tag" yellow><summary> 配置Tomcat步骤 </summary>              <div class='content'>              <ul><li>添加CATALINA_HOME&#x3D;你的Tomcat安装目录\Tomcat x.xx (x.xx为版本号)</li><li>添加CATALINA_BASE&#x3D;你的Tomcat安装目录\Tomcat x.xx (x.xx为版本号)</li><li>添加CLASSPATH&#x3D;你的Tomcat安装目录\Tomcat x.xx (x.xx为版本号)\lib\servlet-api.jar</li><li>往path变量里面添加你的Tomcat安装目录\Tomcat x.xx (x.xx为版本号)\lib</li><li>往path变量里面添加你的Tomcat安装目录\Tomcat x.xx (x.xx为版本号)\bin</li></ul>              </div>            </details><p>添加完成效果应该为：</p><p><img src="https://cdn.z.wiki/autoupload/20241106/NnBd/909X91/PixPin-2024-11-06-12-41-36.jpg?type=ha" alt="效果图"></p><p><img src="https://cdn.z.wiki/autoupload/20241106/BlCV/597X62/PixPin-2024-11-06-12-42-02.jpg?type=ha"></p><div class="tip warning"><p>Tips</p></div><p>不使用时请及时关闭，不然长期占用端口，产生网络相关的驱动程序（如网卡驱动）可能工作异常，致使蓝屏。</p><h3 id="随机测试"><a href="#随机测试" class="headerlink" title="随机测试"></a>随机测试</h3><p>tomcat是什么？ <span class="hide-inline"><button type="button" class="hide-button" style="background-color: #FF7242;color: #fff">查看答案  </button><span class="hide-content">Tomcat是由Apache软件基金会属下Jakarta项目开发的Servlet容器，按照Sun Microsystems提供的技术规范，实现了对Servlet和JavaServer Page（JSP）的支持，并提供了作为Web服务器的一些特有功能，如Tomcat管理和控制平台、安全局管理和Tomcat阀等。由于Tomcat本身也内含了HTTP服务器，因此也可以视作单独的Web服务器。但是，不能将Tomcat和Apache HTTP服务器混淆，Apache HTTP服务器是用C语言实现的HTTPWeb服务器；这两个HTTP web server不是捆绑在一起的。Apache Tomcat包含了配置管理工具，也可以通过编辑XML格式的配置文件来进行配置</span></span><br>有用的知识又 <img no-lazy class="inline" src="https://bu.dusays.com/2022/05/19/6285328a83ca7.gif" style="height:40px;"/> 了 进步每一天</p><blockquote><p>版权所有—Sakura&#x2F;kasumiTech</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaweb </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
